extends ../layout

mixin listMyEvents(groupTitle, groupType)
  h2 #{groupTitle}
  div(ng-show="!events.#{groupType}.length")
   em Нет событий
  div(ng-show="events.#{groupType}.length")
    div.row.preview_event(ng-repeat="event in events.#{groupType}", ng-click="viewEvent(event)")
      .col-sm-10
        include ../partials/preview-event
      .col-sm-2
        if groupType == 'my'
          .btn-group
            a.btn.btn-default(ng-href="/event/{{event._id}}/edit", role="button") Редактировать
            //a.btn.btn-default(href="#", role="button") Удалить // TODO
        if groupType == 'going'
          .btn-group
            a.btn.btn-default(role="button") TODO: Отказаться

block content
  .page-header
    h1 Мои cобытия
  div(ng-controller='MyEventsCtrl')
    +listMyEvents('Созданные мной', 'my')
    +listMyEvents('Собираюсь пойти', 'going')
    +listMyEvents('Посещенные', 'visited')
